"use strict";(self.webpackChunkavail_docs_wiki=self.webpackChunkavail_docs_wiki||[]).push([[2396],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>m});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var c=n.createContext({}),s=function(e){var t=n.useContext(c),i=t;return e&&(i="function"==typeof e?e(t):l(l({},t),e)),i},d=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),h=s(i),u=a,m=h["".concat(c,".").concat(u)]||h[u]||p[u]||o;return i?n.createElement(m,l(l({ref:t},d),{},{components:i})):n.createElement(m,l({ref:t},d))}));function m(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=i.length,l=new Array(o);l[0]=u;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r[h]="string"==typeof e?e:a,l[1]=r;for(var s=2;s<o;s++)l[s]=i[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,i)}u.displayName="MDXCreateElement"},9345:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>s});var n=i(7462),a=(i(7294),i(3905));const o={id:"light-client",title:"Introduction to Avail Light Clients",sidebar_label:"Light Clients",description:"Learn about Avail's data availability chain",keywords:["docs","avail","availability","scale","rollup"],image:"https://availproject.github.io/img/avail/AvailDocs.png"},l=void 0,r={unversionedId:"about/introduction/light-client",id:"about/introduction/light-client",title:"Introduction to Avail Light Clients",description:"Learn about Avail's data availability chain",source:"@site/docs/about/introduction/light-clients.md",sourceDirName:"about/introduction",slug:"/about/introduction/light-client",permalink:"/about/introduction/light-client",draft:!1,editUrl:"https://github.com/availproject/availproject.github.io/tree/main/docs/about/introduction/light-clients.md",tags:[],version:"current",lastUpdatedBy:"DSalman03",lastUpdatedAt:1694721595,formattedLastUpdatedAt:"Sep 14, 2023",frontMatter:{id:"light-client",title:"Introduction to Avail Light Clients",sidebar_label:"Light Clients",description:"Learn about Avail's data availability chain",keywords:["docs","avail","availability","scale","rollup"],image:"https://availproject.github.io/img/avail/AvailDocs.png"},sidebar:"avail",previous:{title:"Application IDs",permalink:"/about/introduction/app-id"},next:{title:"Validiums",permalink:"/about/introduction/validiums"}},c={},s=[{value:"Light Clients",id:"light-clients",level:2},{value:"Light client",id:"light-client",level:3},{value:"When and how to embed the light client",id:"when-and-how-to-embed-the-light-client",level:2}],d={toc:s},h="wrapper";function p(e){let{components:t,...i}=e;return(0,a.kt)(h,(0,n.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"light-clients"},"Light Clients"),(0,a.kt)("p",null,"Avail light client (LC) lets you interact with Avail blockchain without requiring a full node and without trust assumptions towards remote peers.\nThis is accomplished by leveraging ",(0,a.kt)("strong",{parentName:"p"},"Data Availability Sampling (DAS)")," performed by the light client on every newly created block."),(0,a.kt)("p",null,"The light client listens on the Avail network for finalized blocks and performs DAS on a predetermined number of cells on each new block.\nAfter successful block verification, ",(0,a.kt)("strong",{parentName:"p"},"block confidence")," is calculated for a number of cells in the matrix, with the number depending on the percentage of certainty the users wishes to achieve."),(0,a.kt)("p",null,"Light client functionality is separated into two logical parts - the ",(0,a.kt)("em",{parentName:"p"},"light client")," and the ",(0,a.kt)("em",{parentName:"p"},"app client"),". While the LC is primarily focused on DAS, the app client is used to perform data reconstruction."),(0,a.kt)("h3",{id:"light-client"},"Light client"),(0,a.kt)("p",null,"The ",(0,a.kt)("strong",{parentName:"p"},"light client")," mode of operation is active regardless of whether the app client is also active or not.\nLight client connects to an Avail node via a WebSocket connection and waits for a newly finalized block, with the header containing its KZG commitments."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Avail blocks are chunked and divided into equal sized cells as a part of that blocks matrix. Each row in the matrix is then erasure coded using ",(0,a.kt)("strong",{parentName:"p"},"Reed-Solomon (RS)")," erasure codes and committed with ",(0,a.kt)("strong",{parentName:"p"},"Kate-Zaverucha-Goldberg (KZG)")," commitments.")),(0,a.kt)("p",null,"On each received header the client does random sampling of the matrix cells, which are retrieved using one of two mechanisms:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"DHT")," - the client first tries to retrieve cells via Kademlia DHT, on the LC-only high availability peer-to-peer network."),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"RPC")," - if some or all of the required cells can't be found on the DHT, LC uses RPC calls to the Avail node(s) to retrieve the data. Cells not already found in the DHT will be uploaded thus increasing blocks availability in the LC P2P network")),(0,a.kt)("p",null,"Once the data is received, light client verifies individual cells and calculates the confidence that is then stored locally."),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"Light client uses ",(0,a.kt)("em",{parentName:"p"},"libp2p")," with ",(0,a.kt)("strong",{parentName:"p"},"Kademlia")," as a DHT implementation. Peer-to-peer network is able to perform NAT traversal, both symmetric and asymmetric, enabling easy connectivity with various network configurations (e.g. symmetric and asymmetric NAT).")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"On fresh startup, the LC performs a block sync with the node, using both DHT and RPC mechanisms. The block depth to which the sync is going to be done is set with the ",(0,a.kt)("inlineCode",{parentName:"p"},"sync_block_depth")," config parameter, which needs to be set to the max number of blocks the connected node is caching (if downloading via RPC).")),(0,a.kt)("h2",{id:"when-and-how-to-embed-the-light-client"},"When and how to embed the light client"),(0,a.kt)("p",null,"The Avail light client plays a vital role in ensuring the availability and correctness of data\nwithin the Avail network. By employing random sampling, it achieves security levels comparable to\nfull nodes. Furthermore, by leveraging the peer-to-peer network, it enhances overall data availability\nwhile reducing the load on full nodes. The light client is capable of downloading and verifying\napplication-specific data submitted to Avail, which can be conveniently queried using the light client API.",(0,a.kt)("br",{parentName:"p"}),"\n","The light client exposes an HTTP API that enables users to query the status, confidence, and application data\nfor each processed block. When a block is finalized in Avail, the light client performs random sampling and\nverification, calculates confidence in the given block data, and if the confidence is high, retrieves the\napplication data from the block. This data is then verified and stored locally for easy access."))}p.isMDXComponent=!0}}]);